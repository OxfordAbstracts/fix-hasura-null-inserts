// Generated by purs version 0.15.7
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Bind from "../Control.Bind/index.js";
import * as Control_Monad_Error_Class from "../Control.Monad.Error.Class/index.js";
import * as Data_Either from "../Data.Either/index.js";
import * as Data_Function from "../Data.Function/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Functor_Variant from "../Data.Functor.Variant/index.js";
import * as Data_String_Common from "../Data.String.Common/index.js";
import * as Dotenv_Internal_Apply from "../Dotenv.Internal.Apply/index.js";
import * as Dotenv_Internal_ChildProcess from "../Dotenv.Internal.ChildProcess/index.js";
import * as Dotenv_Internal_Environment from "../Dotenv.Internal.Environment/index.js";
import * as Dotenv_Internal_Parse from "../Dotenv.Internal.Parse/index.js";
import * as Dotenv_Internal_Resolve from "../Dotenv.Internal.Resolve/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Effect_Exception from "../Effect.Exception/index.js";
import * as Node_Encoding from "../Node.Encoding/index.js";
import * as Node_FS_Aff from "../Node.FS.Aff/index.js";
import * as Parsing from "../Parsing/index.js";
import * as Run from "../Run/index.js";
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect_Aff.applicativeAff);
var on = /* #__PURE__ */ Data_Functor_Variant.on();
var bind = /* #__PURE__ */ Control_Bind.bind(Effect_Aff.bindAff);
var readDotenv = /* #__PURE__ */ (function () {
    return Data_Function.flip(Control_Monad_Error_Class.catchError(Effect_Aff.monadErrorAff))(Data_Function["const"](pure("")))(Data_Functor.map(Effect_Aff.functorAff)(Data_String_Common.trim)(Node_FS_Aff.readTextFile(Node_Encoding.UTF8.value)(".env")));
})();
var processSettings = /* #__PURE__ */ (function () {
    var $14 = Run.interpret(Effect_Aff.monadAff)(on({
        reflectSymbol: function () {
            return "environment";
        }
    })(Dotenv_Internal_Environment["_environment"])(Dotenv_Internal_Environment.handleEnvironment)(on({
        reflectSymbol: function () {
            return "childProcess";
        }
    })(Dotenv_Internal_ChildProcess["_childProcess"])(Dotenv_Internal_ChildProcess.handleChildProcess)(Data_Functor_Variant.case_)));
    var $15 = Control_Bind.composeKleisli(Run.bindRun)(Dotenv_Internal_Resolve.resolveValues)(Dotenv_Internal_Apply.applySettings);
    return function ($16) {
        return $14($15($16));
    };
})();
var parseSettings = /* #__PURE__ */ (function () {
    var $17 = Data_Either.either((function () {
        var $20 = Control_Monad_Error_Class.throwError(Effect_Aff.monadThrowAff);
        return function ($21) {
            return $20(Effect_Exception.error(Parsing.parseErrorMessage($21)));
        };
    })())(pure);
    var $18 = Data_Function.flip(Parsing.runParser)(Dotenv_Internal_Parse.settings);
    return function ($19) {
        return $17($18($19));
    };
})();
var loadFile = /* #__PURE__ */ bind(/* #__PURE__ */ bind(readDotenv)(parseSettings))(processSettings);
var loadContents = /* #__PURE__ */ Control_Bind.composeKleisli(Effect_Aff.bindAff)(parseSettings)(processSettings);
export {
    loadFile,
    loadContents
};
